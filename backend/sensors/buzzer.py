from gpiozero import TonalBuzzer
from time import sleep

class Buzzer:
    def __init__(self, pin=18):
        self.buzzer = TonalBuzzer(pin)

    def play_tune(self, tune):
        for note, duration in tune:
            print(note if note else "Pause")
            self.buzzer.play(note)
            sleep(float(duration))
        self.buzzer.stop()

    def stop(self):
        self.buzzer.stop()


# Définition de la mélodie
SONG = [
    ["E5", 0.3], ["Eb5", 0.3], ["E5", 0.3], ["Eb5", 0.3],
    ["E5", 0.3], ["B4", 0.3], ["D5", 0.3], ["C5", 0.3],
    ["A4", 0.6], [None, 0.1], ["C4", 0.3], ["E4", 0.3], ["A4", 0.3],
    ["B4", 0.6], [None, 0.1], ["E4", 0.3], ["Ab4", 0.3], ["B4", 0.3],
    ["C5", 0.6], [None, 0.1], ["E4", 0.3], ["E5", 0.3], ["Eb5", 0.3],
    ["E5", 0.3], ["Eb5", 0.3], ["E5", 0.3], ["B4", 0.3], ["D5", 0.3], ["C5", 0.3],
    ["A4", 0.6], [None, 0.1], ["C4", 0.3], ["E4", 0.3], ["A4", 0.3],
    ["B4", 0.6], [None, 0.1], ["E4", 0.3], ["C5", 0.3], ["B4", 0.3], ["A4", 0.1]
]

melody_DOOM = [
    ["E3", 0.8], ["E3", 0.8], ["E4", 0.8], ["E3", 0.8], ["E3", 0.8], ["D4", 0.8], ["E3", 0.8], ["E3", 0.8],
    ["C4", 0.8], ["E3", 0.8], ["E3", 0.8], ["A#3", 0.8], ["E3", 0.8], ["E3", 0.8], ["B3", 0.8], ["C4", 0.8],
    ["E3", 0.8], ["E3", 0.8], ["E4", 0.8], ["E3", 0.8], ["E3", 0.8], ["D4", 0.8], ["E3", 0.8], ["E3", 0.8],
    ["C4", 0.8], ["E3", 0.8], ["E3", 0.8], ["A#3", 1.6],

    ["E3", 0.8], ["E3", 0.8], ["E4", 0.8], ["E3", 0.8], ["E3", 0.8], ["D4", 0.8], ["E3", 0.8], ["E3", 0.8],
    ["C4", 0.8], ["E3", 0.8], ["E3", 0.8], ["A#3", 0.8], ["E3", 0.8], ["E3", 0.8], ["B3", 0.8], ["C4", 0.8],
    ["E3", 0.8], ["E3", 0.8], ["E4", 0.8], ["E3", 0.8], ["E3", 0.8], ["D4", 0.8], ["E3", 0.8], ["E3", 0.8],
    ["C4", 0.8], ["E3", 0.8], ["E3", 0.8], ["A#3", 1.6],

    ["E3", 0.8], ["E3", 0.8], ["E4", 0.8], ["E3", 0.8], ["E3", 0.8], ["D4", 0.8], ["E3", 0.8], ["E3", 0.8],
    ["C4", 0.8], ["E3", 0.8], ["E3", 0.8], ["A#3", 0.8], ["E3", 0.8], ["E3", 0.8], ["B3", 0.8], ["C4", 0.8],
    ["E3", 0.8], ["E3", 0.8], ["E4", 0.8], ["E3", 0.8], ["E3", 0.8], ["D4", 0.8], ["E3", 0.8], ["E3", 0.8],
    ["C4", 0.8], ["E3", 0.8], ["E3", 0.8], ["A#3", 1.6],

    ["E3", 0.8], ["E3", 0.8], ["E4", 0.8], ["E3", 0.8], ["E3", 0.8], ["D4", 0.8], ["E3", 0.8], ["E3", 0.8],
    ["C4", 0.8], ["E3", 0.8], ["E3", 0.8], ["A#3", 0.8], ["E3", 0.8], ["E3", 0.8], ["B3", 0.8], ["C4", 0.8],
    ["E3", 0.8], ["E3", 0.8], ["E4", 0.8], ["E3", 0.8], ["E3", 0.8], ["D4", 0.8], ["E3", 0.8], ["E3", 0.8],
    ["F#4", 0.4], ["D4", 0.4], ["B3", 0.4], ["A4", 0.4], ["F#4", 0.4], ["B3", 0.4], ["D4", 0.4], ["F#4", 0.4], ["A4", 0.4], ["F#4", 0.4], ["D4", 0.4], ["B3", 0.4],

    ["E3", 0.8], ["E3", 0.8], ["E4", 0.8], ["E3", 0.8], ["E3", 0.8], ["D4", 0.8], ["E3", 0.8], ["E3", 0.8],
    ["C4", 0.8], ["E3", 0.8], ["E3", 0.8], ["A#3", 0.8], ["E3", 0.8], ["E3", 0.8], ["B3", 0.8], ["C4", 0.8],
    ["E3", 0.8], ["E3", 0.8], ["E4", 0.8], ["E3", 0.8], ["E3", 0.8], ["D4", 0.8], ["E3", 0.8], ["E3", 0.8],
    ["C4", 0.8], ["E3", 0.8], ["E3", 0.8], ["A#3", 1.6],

    ["E3", 0.8], ["E3", 0.8], ["E4", 0.8], ["E3", 0.8], ["E3", 0.8], ["D4", 0.8], ["E3", 0.8], ["E3", 0.8],
    ["C4", 0.8], ["E3", 0.8], ["E3", 0.8], ["A#3", 0.8], ["E3", 0.8], ["E3", 0.8], ["B3", 0.8], ["C4", 0.8],
    ["E3", 0.8], ["E3", 0.8], ["E4", 0.8], ["E3", 0.8], ["E3", 0.8], ["D4", 0.8], ["E3", 0.8], ["E3", 0.8],
    ["B4", 0.4], ["G4", 0.4], ["E4", 0.4], ["G4", 0.4], ["B4", 0.4], ["E5", 0.4], ["G4", 0.4], ["B4", 0.4], ["E5", 0.4], ["B4", 0.4], ["G5", 0.4], ["B5", 0.4],

    ["A3", 0.8], ["A3", 0.8], ["A4", 0.8], ["A3", 0.8], ["A3", 0.8], ["G4", 0.8], ["A3", 0.8], ["A3", 0.8],
    ["F4", 0.8], ["A3", 0.8], ["A3", 0.8], ["D#4", 0.8], ["A3", 0.8], ["A3", 0.8], ["E4", 0.8], ["F4", 0.8],
    ["A3", 0.8], ["A3", 0.8], ["A4", 0.8], ["A3", 0.8], ["A3", 0.8], ["G4", 0.8], ["A3", 0.8], ["A3", 0.8],
    ["F4", 0.8], ["A3", 0.8], ["A3", 0.8], ["D#4", 1.6],

    ["A3", 0.8], ["A3", 0.8], ["A4", 0.8], ["A3", 0.8], ["A3", 0.8], ["G4", 0.8], ["A3", 0.8], ["A3", 0.8],
    ["F4", 0.8], ["A3", 0.8], ["A3", 0.8], ["D#4", 0.8], ["A3", 0.8], ["A3", 0.8], ["E4", 0.8], ["F4", 0.8],
    ["A3", 0.8], ["A3", 0.8], ["A4", 0.8], ["A3", 0.8], ["A3", 0.8], ["G4", 0.8], ["A3", 0.8], ["A3", 0.8],
    ["A4", 0.4], ["F4", 0.4], ["D4", 0.4], ["A4", 0.4], ["F4", 0.4], ["D4", 0.4], ["C5", 0.4], ["A4", 0.4], ["F4", 0.4], ["A4", 0.4], ["F4", 0.4], ["D4", 0.4],

    ["E3", 0.8], ["E3", 0.8], ["E4", 0.8], ["E3", 0.8], ["E3", 0.8], ["D4", 0.8], ["E3", 0.8], ["E3", 0.8],
    ["C4", 0.8], ["E3", 0.8], ["E3", 0.8], ["A#3", 0.8], ["E3", 0.8], ["E3", 0.8], ["B3", 0.8], ["C4", 0.8],
    ["E3", 0.8], ["E3", 0.8], ["E4", 0.8], ["E3", 0.8], ["E3", 0.8], ["D4", 0.8], ["E3", 0.8], ["E3", 0.8],
    ["C4", 0.8], ["E3", 0.8], ["E3", 0.8], ["A#3", 1.6],

    ["E3", 0.8], ["E3", 0.8], ["E4", 0.8], ["E3", 0.8], ["E3", 0.8], ["D4", 0.8], ["E3", 0.8], ["E3", 0.8],
    ["C4", 0.8], ["E3", 0.8], ["E3", 0.8], ["A#3", 0.8], ["E3", 0.8], ["E3", 0.8], ["B3", 0.8], ["C4", 0.8],
    ["E3", 0.8], ["E3", 0.8], ["E4", 0.8], ["E3", 0.8], ["E3", 0.8], ["D4", 0.8], ["E3", 0.8], ["E3", 0.8],
    ["C4", 0.8], ["E3", 0.8], ["E3", 0.8], ["A#3", 1.6],

    ["C#4", 0.8], ["C#4", 0.8], ["C#5", 0.8], ["C#4", 0.8], ["C#4", 0.8], ["B4", 0.8], ["C#4", 0.8], ["C#4", 0.8],
    ["A4", 0.8], ["C#4", 0.8], ["C#4", 0.8], ["G4", 0.8], ["C#4", 0.8], ["C#4", 0.8], ["G#4", 0.8], ["A4", 0.8],
    ["B3", 0.8], ["B3", 0.8], ["B4", 0.8], ["B3", 0.8], ["B3", 0.8], ["A4", 0.8], ["B3", 0.8], ["B3", 0.8],
    ["G4", 0.8], ["B3", 0.8], ["B3", 0.8], ["F4", 1.6],

    ["E3", 0.8], ["E3", 0.8], ["E4", 0.8], ["E3", 0.8], ["E3", 0.8], ["D4", 0.8], ["E3", 0.8], ["E3", 0.8],
    ["C4", 0.8], ["E3", 0.8], ["E3", 0.8], ["A#3", 0.8], ["E3", 0.8], ["E3", 0.8], ["B3", 0.8], ["C4", 0.8],
    ["E3", 0.8], ["E3", 0.8], ["E4", 0.8], ["E3", 0.8], ["E3", 0.8], ["D4", 0.8], ["E3", 0.8], ["E3", 0.8],
    ["B4", 0.4], ["G4", 0.4], ["E4", 0.4], ["G4", 0.4], ["B4", 0.4], ["E5", 0.4], ["G4", 0.4], ["B4", 0.4], ["E5", 0.4], ["B4", 0.4], ["G5", 0.4], ["B5", 0.4],

    ["E3", 0.8], ["E3", 0.8], ["E4", 0.8], ["E3", 0.8], ["E3", 0.8], ["D4", 0.8], ["E3", 0.8], ["E3", 0.8],
    ["C4", 0.8], ["E3", 0.8], ["E3", 0.8], ["A#3", 0.8], ["E3", 0.8], ["E3", 0.8], ["B3", 0.8], ["C4", 0.8],
    ["E3", 0.8], ["E3", 0.8], ["E4", 0.8], ["E3", 0.8], ["E3", 0.8], ["D4", 0.8], ["E3", 0.8], ["E3", 0.8],
    ["C4", 0.8], ["E3", 0.8], ["E3", 0.8], ["A#3", 1.6],

    ["E3", 0.8], ["E3", 0.8], ["E4", 0.8], ["E3", 0.8], ["E3", 0.8], ["D4", 0.8], ["E3", 0.8], ["E3", 0.8],
    ["C4", 0.8], ["E3", 0.8], ["E3", 0.8], ["A#3", 0.8], ["E3", 0.8], ["E3", 0.8], ["B3", 0.8], ["C4", 0.8],
    ["E3", 0.8], ["E3", 0.8], ["E4", 0.8], ["E3", 0.8], ["E3", 0.8], ["D4", 0.8], ["E3", 0.8], ["E3", 0.8],
    ["F#4", 0.4], ["D#4", 0.4], ["B3", 0.4], ["F#4", 0.4], ["D#4", 0.4], ["B3", 0.4], ["G4", 0.4], ["D4", 0.4], ["B3", 0.4], ["D#5", 0.4], ["D#4", 0.4], ["B3", 0.4],

    ["E3", 0.8], ["E3", 0.8], ["E4", 0.8], ["E3", 0.8], ["E3", 0.8], ["D4", 0.8], ["E3", 0.8], ["E3", 0.8],
    ["C4", 0.8], ["E3", 0.8], ["E3", 0.8], ["A#3", 0.8], ["E3", 0.8], ["E3", 0.8], ["B3", 0.8], ["C4", 0.8],
    ["E3", 0.8], ["E3", 0.8], ["E4", 0.8], ["E3", 0.8], ["E3", 0.8], ["D4", 0.8], ["E3", 0.8], ["E3", 0.8],
    ["C4", 0.8], ["E3", 0.8], ["E3", 0.8], ["A#3", 1.6],

    ["E3", 0.8], ["E3", 0.8], ["E4", 0.8], ["E3", 0.8], ["E3", 0.8], ["D4", 0.8], ["E3", 0.8], ["E3", 0.8],
    ["C4", 0.8], ["E3", 0.8], ["E3", 0.8], ["A#3", 0.8], ["E3", 0.8], ["E3", 0.8], ["B3", 0.8], ["C4", 0.8],
    ["E3", 0.8], ["E3", 0.8], ["E4", 0.8], ["E3", 0.8], ["E3", 0.8], ["D4", 0.8], ["E3", 0.8], ["E3", 0.8],
    ["E5", 0.4], ["B4", 0.4], ["G4", 0.4], ["G5", 0.4], ["E5", 0.4], ["G4", 0.4], ["B4", 0.4], ["D5", 0.4], ["E5", 0.4], ["G5", 0.4], ["E5", 0.4], ["G4", 0.4],

    ["E3", 0.8], ["E3", 0.8], ["E4", 0.8], ["E3", 0.8], ["E3", 0.8], ["D4", 0.8], ["E3", 0.8], ["E3", 0.8],
    ["C4", 0.8], ["E3", 0.8], ["E3", 0.8], ["A#3", 0.8], ["E3", 0.8], ["E3", 0.8], ["B3", 0.8], ["C4", 0.8],
    ["E3", 0.8], ["E3", 0.8], ["E4", 0.8], ["E3", 0.8], ["E3", 0.8], ["D4", 0.8], ["E3", 0.8], ["E3", 0.8],
    ["C4", 0.8], ["E3", 0.8], ["E3", 0.8], ["A#3", 1.6],

    ["A3", 0.8], ["A3", 0.8], ["A4", 0.8], ["A3", 0.8], ["A3", 0.8], ["G4", 0.8], ["A3", 0.8], ["A3", 0.8],
    ["F4", 0.8], ["A3", 0.8], ["A3", 0.8], ["D#4", 0.8], ["A3", 0.8], ["A3", 0.8], ["E4", 0.8], ["F4", 0.8],
    ["A3", 0.8], ["A3", 0.8], ["A4", 0.8], ["A3", 0.8], ["A3", 0.8], ["G4", 0.8], ["A3", 0.8], ["A3", 0.8],
    ["A4", 0.4], ["F4", 0.4], ["D4", 0.4], ["A4", 0.4], ["F4", 0.4], ["D4", 0.4], ["C5", 0.4], ["A4", 0.4], ["F4", 0.4], ["A4", 0.4], ["F4", 0.4], ["D4", 0.4],

    ["E3", 0.8], ["E3", 0.8], ["E4", 0.8], ["E3", 0.8], ["E3", 0.8], ["D4", 0.8], ["E3", 0.8], ["E3", 0.8],
    ["C4", 0.8], ["E3", 0.8], ["E3", 0.8], ["A#3", 0.8], ["E3", 0.8], ["E3", 0.8], ["B3", 0.8], ["C4", 0.8],
    ["E3", 0.8], ["E3", 0.8], ["E4", 0.8], ["E3", 0.8], ["E3", 0.8], ["D4", 0.8], ["E3", 0.8], ["E3", 0.8],
    ["C4", 0.8], ["E3", 0.8], ["E3", 0.8], ["A#3", 1.6],

    ["E3", 0.8], ["E3", 0.8], ["E4", 0.8], ["E3", 0.8], ["E3", 0.8], ["D4", 0.8], ["E3", 0.8], ["E3", 0.8],
    ["C4", 0.8], ["E3", 0.8], ["E3", 0.8], ["A#3", 0.8], ["E3", 0.8], ["E3", 0.8], ["B3", 0.8], ["C4", 0.8],
    ["E3", 0.8], ["E3", 0.8], ["E4", 0.8], ["E3", 0.8], ["E3", 0.8], ["D4", 0.8], ["E3", 0.8], ["E3", 0.8],
    ["C4", 0.8], ["E3", 0.8], ["E3", 0.8], ["A#3", 1.6],

    ["E3", 0.8], ["E3", 0.8], ["E4", 0.8], ["E3", 0.8], ["E3", 0.8], ["D4", 0.8], ["E3", 0.8], ["E3", 0.8],
    ["C4", 0.8], ["E3", 0.8], ["E3", 0.8], ["A#3", 0.8], ["E3", 0.8], ["E3", 0.8], ["B3", 0.8], ["C4", 0.8],
    ["E3", 0.8], ["E3", 0.8], ["E4", 0.8], ["E3", 0.8], ["E3", 0.8], ["D4", 0.8], ["E3", 0.8], ["E3", 0.8],
    ["C4", 0.8], ["E3", 0.8], ["E3", 0.8], ["A#3", 1.6],

    ["E3", 0.8], ["E3", 0.8], ["E4", 0.8], ["E3", 0.8], ["E3", 0.8], ["D4", 0.8], ["E3", 0.8], ["E3", 0.8],
    ["C4", 0.8], ["E3", 0.8], ["E3", 0.8], ["A#3", 0.8], ["E3", 0.8], ["E3", 0.8], ["B3", 0.8], ["C4", 0.8],
    ["E3", 0.8], ["E3", 0.8], ["E4", 0.8], ["E3", 0.8], ["E3", 0.8], ["D4", 0.8], ["E3", 0.8], ["E3", 0.8],
    ["B4", 0.4], ["G4", 0.4], ["E4", 0.4], ["B3", 0.4], ["E4", 0.4], ["G4", 0.4], ["C5", 0.4], ["B4", 0.4], ["G4", 0.4], ["B4", 0.4], ["G4", 0.4], ["E4", 0.4]
]





# Exemple d'utilisation
if __name__ == "__main__":
    buzzer = Buzzer()
    try:
        buzzer.play_tune(SONG)
    except KeyboardInterrupt:
        buzzer.stop()
        print("Arrêt du buzzer.")
